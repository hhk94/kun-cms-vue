{"remainingRequest":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\code_by_hk\\kun-cms-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code_by_hk\\kun-cms-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code_by_hk\\kun-cms-vue\\src\\pages\\User\\UserChange.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code_by_hk\\kun-cms-vue\\src\\pages\\User\\UserChange.vue","mtime":1587636008670},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDpcXGNvZGVfYnlfaGtcXGt1bi1jbXMtdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgU3RvcmFnZSB9IGZyb20gJ0Ava3VuL3V0aWxzL3N0b3JhZ2UnOwp2YXIgc3RvcmFnZSA9IG5ldyBTdG9yYWdlKCk7CmltcG9ydCBDb25maWcgZnJvbSAnQC9jb25maWcnOwppbXBvcnQgQWRtaW4gZnJvbSAnQC9rdW4vYXBpL2FkbWluJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVc2VyQ2hhbmdlJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBpbWFnZVVybDogJycsCiAgICAgIGFjdGlvbjogJ2Ntcy9hZGRfdXNlcl9hdmF0YXInLAogICAgICB1c2VyOiB7CiAgICAgICAgYXBwaWQ6ICcnLAogICAgICAgIG5ld19wc2Q6ICcnLAogICAgICAgIG5pY2tfbmFtZTogJycsCiAgICAgICAgcHNkOiAnJywKICAgICAgICBpZDogJycsCiAgICAgICAgYXZhdGFyX2ltZ19pZDogJycKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUF2YXRhclN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZUF2YXRhclN1Y2Nlc3MocmVzLCBmaWxlKSB7CiAgICAgIC8v5aS05YOP5LiK5Lyg5oiQ5YqfCiAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUucmF3KTsKICAgICAgdGhpcy51c2VyLmF2YXRhcl9pbWdfaWQgPSByZXMuaWQ7CiAgICAgIHRoaXMuJHN0b3JlLmdldHRlcnMudG9rZW4uYXBwLmF2YXRhcl9pbWdfdXJsID0gcmVzLmRhdGE7CiAgICAgIGNvbnNvbGUubG9nKCd0aGlzLiRzdG9yZS5nZXR0ZXJzLnRva2VuLmFwcC5hdmF0YXJfaW1nX3VybCcsIHRoaXMuJHN0b3JlLmdldHRlcnMudG9rZW4uYXBwLmF2YXRhcl9pbWdfdXJsKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ0hvbWUvc2V0X3Rva2VuJywgdGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbik7CiAgICB9LAogICAgYmVmb3JlQXZhdGFyVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVBdmF0YXJVcGxvYWQoZmlsZSkgewogICAgICAvL+S4iuS8oOWJjeaTjeS9nAogICAgICB2YXIgaXNKUEcgPSBmaWxlLnR5cGUgPT09ICdpbWFnZS9qcGVnJzsKICAgICAgdmFyIGlzUE5HID0gZmlsZS50eXBlID09PSAnaW1hZ2UvcG5nJzsKICAgICAgdmFyIGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKICAgICAgY29uc29sZS5sb2coZmlsZSk7CgogICAgICBpZiAoIWlzSlBHICYmICFpc1BORykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWktOWDj+WbvueJh+WPquiDveaYryBKUEcvUE5HIOagvOW8jyEnKTsKICAgICAgfQoKICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4cgMk1CIScpOwogICAgICB9CgogICAgICByZXR1cm4gaXNKUEcgfHwgaXNQTkcgJiYgaXNMdDJNOwogICAgfSwKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KCkgewogICAgICAvL+eCueWHu+aPkOS6pOS/ruaUuQogICAgICBpZiAodGhpcy51c2VyLm5ld19wc2QgIT0gJycgJiYgdGhpcy51c2VyLm5ld19wc2QgIT0gbnVsbCAmJiB0aGlzLnVzZXIubmV3X3BzZC5sZW5ndGggIT0gMCkgewogICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jaGFuZ2VfYXhpb3MoKTsKICAgIH0sCiAgICBwc2RfcHVzaDogZnVuY3Rpb24gcHNkX3B1c2goKSB7CiAgICAgIC8v5aGr5LqG5paw5a+G56CB77yM6ZyA6KaB6aqM6K+B5pen5a+G56CBCiAgICAgIGlmICh0aGlzLnVzZXIucHNkID09ICcnIHx8IHRoaXMudXNlci5wc2QgPT0gbnVsbCB8fCB0aGlzLnVzZXIucHNkLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnml6flr4bnoIHlho3mj5DkuqQnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hhbmdlX2F4aW9zKCk7CiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VfYXhpb3M6IGZ1bmN0aW9uIGNoYW5nZV9heGlvcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gQWRtaW4udXNlcl9jaGFuZ2UoX3RoaXMudXNlcik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kYXRhLnN0YXRlID09IHdpbmRvdy5nLlNVQ0NFU1NfU1RBVEUpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICAgICAgICAgICAgX3RoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRub3RpZnkoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQuZGF0YS5tc2csCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kYXRhLmNoYW5nZV9wc2QpIHsKICAgICAgICAgICAgICAgICAgICAvL+WmguaenOi/measoeS/ruaUueS/ruaUueS6huWvhueggQogICAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnLycpOwoKICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnJlbW92ZV9zdG9yYWdlKCdVU0VSX0lORk8nKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsvL2VtcHR5CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQuZGF0YS5tc2cKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDddXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuYWN0aW9uID0gQ29uZmlnLmJhc2VVUkwgKyB0aGlzLmFjdGlvbjsgLy8gY29uc29sZS5sb2codGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbikKCiAgICB0aGlzLnVzZXIubmlja19uYW1lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbi5hcHAubmlja19uYW1lOwogICAgdGhpcy51c2VyLmFwcGlkID0gdGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbi5hcHAuYXBwX2lkOwogICAgdGhpcy51c2VyLmlkID0gdGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbi5hcHAuaWQ7CiAgICB0aGlzLmltYWdlVXJsID0gdGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbi5hcHAuYXZhdGFyX2ltZ191cmw7CiAgICBjb25zb2xlLmxvZygndGhpcy5pbWFnZVVybCcsIHRoaXMuaW1hZ2VVcmwpOwogIH0KfTs="},{"version":3,"sources":["UserChange.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"user\" >\r\n\t\t<el-breadcrumb separator=\"/\" class=\"bc\">\r\n\t\t\t<el-breadcrumb-item>用户相关</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>账号资料修改</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t<div class=\"center\">\r\n\t\t\t\r\n\t\t\t<div class=\"input-body\">\r\n\t\t\t\t账号：\r\n\t\t\t\t<el-input\r\n\t\t\t\tdisabled\r\n\t\t\t\tsuffix-icon=\"el-icon-user\"\r\n\t\t\t\tv-model=\"user.appid\"\r\n\t\t\t\t>\r\n\t\t\t\t</el-input>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"input-body\">\r\n\t\t\t\t昵称：\r\n\t\t\t\t<el-input\r\n\t\t\t\tv-model=\"user.nick_name\"\r\n\t\t\t\tsuffix-icon=\"el-icon-mouse\"\r\n\t\t\t\t>\r\n\t\t\t\t</el-input>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"input-body\">\r\n\t\t\t\t新密码：\r\n\t\t\t\t<el-input\r\n\t\t\t\tv-model=\"user.new_psd\"\r\n\t\t\t\tsuffix-icon=\"el-icon-goods\"\r\n\t\t\t\t>\r\n\t\t\t\t</el-input>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"avatar-body\">\r\n\t\t\t\t<span>头像：</span>\r\n\t\t\t\t<el-upload\r\n\t\t\t\tclass=\"avatar-uploader\"\r\n\t\t\t\t:action=\"this.action\"\r\n\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t:on-success=\"handleAvatarSuccess\"\r\n\t\t\t\t:before-upload=\"beforeAvatarUpload\">\r\n\t\t\t\t<img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t</el-upload>\r\n\t\t\t</div>\r\n\t\t\t<el-button class=\"submit\" type=\"primary\" plain @click=\"submit()\">提交修改</el-button>\r\n\t\t</div>\r\n\t\t<el-dialog title=\"修改密码需要验证旧密码\"\r\n\t\t:visible.sync=\"dialogFormVisible\" \r\n\t\tcenter top=\"45vh\" :modal=\"false\" \r\n\t\t:modal-append-to-body=\"false\"\r\n\t\twidth=\"500px\">\r\n\t\t<el-form >\r\n\t\t\t<el-input\r\n\t\t\ttype=\"textarea\"\r\n\t\t\t:rows=\"2\"\r\n\t\t\tplaceholder=\"请输入旧密码\"\r\n\t\t\tv-model=\"user.psd\">\r\n\t\t\t</el-input>\r\n\t\t</el-form>\r\n\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t<el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n\t\t<el-button type=\"primary\" @click=\"psd_push()\">确 定</el-button>\r\n\t\t</div>\r\n\t\t</el-dialog>\r\n\t</div>\n</template>\n\n<script>\r\nimport { Storage } from '@/kun/utils/storage'\r\nvar storage = new Storage();\r\nimport Config from '@/config'\r\nimport Admin from '@/kun/api/admin'\r\nexport default {\n\tname: 'UserChange',\r\n\t\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdialogFormVisible:false,\r\n\t\t\timageUrl: '',\r\n\t\t\taction:'cms/add_user_avatar',\r\n\t\t\tuser:{\r\n\t\t\t\tappid:'',\r\n\t\t\t\tnew_psd:'',\r\n\t\t\t\tnick_name:'',\r\n\t\t\t\tpsd:'',\r\n\t\t\t\tid:'',\r\n\t\t\t\tavatar_img_id:''\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\thandleAvatarSuccess(res, file) {//头像上传成功\r\n\t\t\tthis.imageUrl = URL.createObjectURL(file.raw);\r\n\t\t\tthis.user.avatar_img_id = res.id\r\n\t\t\tthis.$store.getters.token.app.avatar_img_url = res.data\r\n\t\t\tconsole.log('this.$store.getters.token.app.avatar_img_url',this.$store.getters.token.app.avatar_img_url)\r\n\t\t\tthis.$store.dispatch('Home/set_token',this.$store.getters.token)\r\n\t\t},\r\n\t\tbeforeAvatarUpload(file) {//上传前操作\r\n\t\t\tconst isJPG = file.type === 'image/jpeg';\r\n\t\t\tconst isPNG = file.type === 'image/png';\r\n\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\t\tconsole.log(file)\r\n\t\t\tif (!isJPG&&!isPNG) {\r\n\t\t\t\tthis.$message.error('上传头像图片只能是 JPG/PNG 格式!');\r\n\t\t\t}\r\n\t\t\tif (!isLt2M) {\r\n\t\t\t\tthis.$message.error('上传头像图片大小不能超过 2MB!');\r\n\t\t\t}\r\n\t\t\treturn isJPG||isPNG && isLt2M ;\r\n\t\t},\r\n\t\tsubmit(){//点击提交修改\r\n\t\t\tif(this.user.new_psd!=''&&this.user.new_psd!=null&&this.user.new_psd.length!=0){\r\n\t\t\t\tthis.dialogFormVisible =  true\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.change_axios()\r\n\t\t},\r\n\t\tpsd_push(){//填了新密码，需要验证旧密码\r\n\t\t\tif(this.user.psd==''||this.user.psd==null||this.user.psd.length==0){\r\n\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\ttitle: '错误',\r\n\t\t\t\t\tmessage: '请填写旧密码再提交'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}else{\r\n\t\t\t\tthis.change_axios()\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync change_axios(){//用户修改请求\r\n\t\t\tlet result\r\n\t\t\ttry {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tresult = await Admin.user_change(this.user)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\tif(result.data.state == window.g.SUCCESS_STATE){\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t\tthis.dialogFormVisible =  false\r\n\t\t\t\tthis.$notify({\r\n\t\t\t\t\ttitle: '成功',\r\n\t\t\t\t\tmessage: result.data.msg,\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t});\r\n\t\t\t\tif(result.data.change_psd){\t//如果这次修改修改了密码\r\n\t\t\t\t\tthis.$router.push('/');\r\n\t\t\t\t\tstorage.remove_storage('USER_INFO')\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//empty\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\ttitle: '错误',\r\n\t\t\t\t\tmessage: result.data.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t},\n\tmounted() {\r\n\t\tthis.action = Config.baseURL + this.action\r\n\t\t// console.log(this.$store.getters.token)\r\n\t\tthis.user.nick_name = this.$store.getters.token.app.nick_name\r\n\t\tthis.user.appid = this.$store.getters.token.app.app_id\r\n\t\tthis.user.id = this.$store.getters.token.app.id\r\n\t\tthis.imageUrl = this.$store.getters.token.app.avatar_img_url\r\n\t\tconsole.log('this.imageUrl',this.imageUrl)\r\n\t}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\r\n.user{\r\n\t.bc{\r\n\t\t\r\n\t\tmargin: 20px;\r\n\t\twidth: calc(100% - 40px);\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n\t.center{\r\n\t\twidth: 500px;\r\n\t\tmargin: 0 auto;\r\n\t\t.input-body{\r\n\t\t\ttext-align: left;\r\n\t\t\tmargin-bottom: 20px;\r\n\t\t\t::v-deep .el-input{\r\n\t\t\t\tmargin-top: 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.avatar-body{\r\n\t\t\tdisplay: flex;\r\n\t\t\t::v-deep .avatar-uploader .el-upload {\r\n\t\t\t\tborder: 1px dashed #d9d9d9;\r\n\t\t\t\tborder-radius: 6px;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t}\r\n\t\t\t::v-deep .avatar-uploader .el-upload:hover {\r\n\t\t\t\tborder-color: #409EFF;\r\n\t\t\t}\r\n\t\t\t::v-deep .avatar-uploader-icon {\r\n\t\t\t\tfont-size: 28px;\r\n\t\t\t\tcolor: #8c939d;\r\n\t\t\t\twidth: 178px;\r\n\t\t\t\theight: 178px;\r\n\t\t\t\tline-height: 178px;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t\t::v-deep .avatar {\r\n\t\t\t\twidth: 178px;\r\n\t\t\t\theight: 178px;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t.submit{\r\n\t\t\tmargin-top: 20px;\r\n\t\t}\r\n\t}\r\n}\n\r\n\r\n// /deep/.markdown-body img{\r\n// \tmax-width: 50%;\r\n// }\n</style>\n"],"sourceRoot":"src/pages/User"}]}