{"remainingRequest":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\code_by_hk\\kun-cms-vue\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\code_by_hk\\kun-cms-vue\\src\\kun\\plugins\\preview\\index.js","dependencies":[{"path":"D:\\code_by_hk\\kun-cms-vue\\src\\kun\\plugins\\preview\\index.js","mtime":1586416880028},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgUHJldmlldyBmcm9tICdAL2NvbXBvbmVudHMvYmFzZS9wcmV2aWV3L3ByZXZpZXcnOwp2YXIgcHJldmlld0ltYWdlID0ge307CgpwcmV2aWV3SW1hZ2UuaW5zdGFsbCA9IGZ1bmN0aW9uICh2dWUpIHsKICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgdmFyIFByZXZpZXdDb25zdHJ1Y3RvciA9IHZ1ZS5leHRlbmQoUHJldmlldyk7CiAgdmFyIGluc3RhbmNlID0gbnVsbDsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXMKCiAgUHJldmlld0NvbnN0cnVjdG9yLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZGF0YSA9IFtdOwogICAgdGhpcy5vcHRpb25zID0ge307CiAgICB0aGlzLmltYWdlSW5kZXggPSAwOwogIH07CgogIHZhciBnZXRJbnN0YW5jZSA9IGZ1bmN0aW9uIGdldEluc3RhbmNlKCkgewogICAgaWYgKCFpbnN0YW5jZSkgewogICAgICBpbnN0YW5jZSA9IG5ldyBQcmV2aWV3Q29uc3RydWN0b3IoKTsKICAgIH0KCiAgICByZXR1cm4gaW5zdGFuY2U7CiAgfTsKCiAgdnVlLnByb3RvdHlwZS4kaW1hZ2VQcmV2aWV3ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCiAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgIHZhciBteUluc3RhbmNlID0gZ2V0SW5zdGFuY2UoKTsKICAgICAgdnVlLnByb3RvdHlwZS4kcHJldmlld0luc3RhbmNlID0gbXlJbnN0YW5jZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgbXlJbnN0YW5jZS4kbW91bnQoZWxlbSk7CiAgICAgIG15SW5zdGFuY2UuZGF0YSA9IG9wdHMuaW1hZ2VzIHx8IFtdOwogICAgICBteUluc3RhbmNlLmltYWdlSW5kZXggPSBvcHRzLmluZGV4IHx8IDA7CiAgICAgIG15SW5zdGFuY2Uub3B0aW9ucyA9IG9wdHMuZGVmYXVsdE9wdCB8fCB7fTsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChteUluc3RhbmNlLiRlbCk7CiAgICAgIG15SW5zdGFuY2UuJG9uKCdjbG9zZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICBteUluc3RhbmNlLmNsb3NlKCk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChteUluc3RhbmNlLiRlbCk7CiAgICAgICAgbXlJbnN0YW5jZS4kZGVzdHJveSgpOwogICAgICAgIG15SW5zdGFuY2UgPSBudWxsOwogICAgICAgIGluc3RhbmNlID0gbnVsbDsKICAgICAgfSk7CiAgICB9CiAgfTsKfTsKClZ1ZS51c2UocHJldmlld0ltYWdlKTsKZXhwb3J0IGRlZmF1bHQgcHJldmlld0ltYWdlOw=="},{"version":3,"sources":["D:/code_by_hk/kun-cms-vue/src/kun/plugins/preview/index.js"],"names":["Vue","Preview","previewImage","install","vue","PreviewConstructor","extend","instance","prototype","close","data","options","imageIndex","getInstance","$imagePreview","opts","elem","document","createElement","myInstance","$previewInstance","$mount","images","index","defaultOpt","body","appendChild","$el","$on","removeChild","$destroy","use"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,OAAP,MAAoB,mCAApB;AAEA,IAAMC,YAAY,GAAG,EAArB;;AACAA,YAAY,CAACC,OAAb,GAAuB,UAAAC,GAAG,EAAI;AAC5B;AACA,MAAMC,kBAAkB,GAAGD,GAAG,CAACE,MAAJ,CAAWL,OAAX,CAA3B;AAEA,MAAIM,QAAQ,GAAG,IAAf,CAJ4B,CAM5B;;AACAF,EAAAA,kBAAkB,CAACG,SAAnB,CAA6BC,KAA7B,GAAqC,YAAY;AAC/C,SAAKC,IAAL,GAAY,EAAZ;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,UAAL,GAAkB,CAAlB;AACD,GAJD;;AAMA,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,QAAI,CAACN,QAAL,EAAe;AACbA,MAAAA,QAAQ,GAAG,IAAIF,kBAAJ,EAAX;AACD;;AACD,WAAOE,QAAP;AACD,GALD;;AAOAH,EAAAA,GAAG,CAACI,SAAJ,CAAcM,aAAd,GAA8B,YAAe;AAAA,QAAdC,IAAc,uEAAP,EAAO;AAC3C;AACA,QAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAb;;AACA,QAAI,CAACX,QAAL,EAAe;AACb,UAAIY,UAAU,GAAGN,WAAW,EAA5B;AACAT,MAAAA,GAAG,CAACI,SAAJ,CAAcY,gBAAd,GAAiCD,UAAjC,CAFa,CAE+B;;AAC5CA,MAAAA,UAAU,CAACE,MAAX,CAAkBL,IAAlB;AACAG,MAAAA,UAAU,CAACT,IAAX,GAAkBK,IAAI,CAACO,MAAL,IAAe,EAAjC;AACAH,MAAAA,UAAU,CAACP,UAAX,GAAwBG,IAAI,CAACQ,KAAL,IAAc,CAAtC;AACAJ,MAAAA,UAAU,CAACR,OAAX,GAAqBI,IAAI,CAACS,UAAL,IAAmB,EAAxC;AACAP,MAAAA,QAAQ,CAACQ,IAAT,CAAcC,WAAd,CAA0BP,UAAU,CAACQ,GAArC;AACAR,MAAAA,UAAU,CAACS,GAAX,CAAe,OAAf,EAAwB,YAAM;AAC5BT,QAAAA,UAAU,CAACV,KAAX;AACAQ,QAAAA,QAAQ,CAACQ,IAAT,CAAcI,WAAd,CAA0BV,UAAU,CAACQ,GAArC;AACAR,QAAAA,UAAU,CAACW,QAAX;AACAX,QAAAA,UAAU,GAAG,IAAb;AACAZ,QAAAA,QAAQ,GAAG,IAAX;AACD,OAND;AAOD;AACF,GAnBD;AAoBD,CAxCD;;AA0CAP,GAAG,CAAC+B,GAAJ,CAAQ7B,YAAR;AAEA,eAAeA,YAAf","sourcesContent":["import Vue from 'vue'\r\nimport Preview from '@/components/base/preview/preview'\r\n\r\nconst previewImage = {}\r\npreviewImage.install = vue => {\r\n  // eslint-disable-line\r\n  const PreviewConstructor = vue.extend(Preview)\r\n\r\n  let instance = null\r\n\r\n  // eslint-disable-next-line func-names\r\n  PreviewConstructor.prototype.close = function () {\r\n    this.data = []\r\n    this.options = {}\r\n    this.imageIndex = 0\r\n  }\r\n\r\n  const getInstance = () => {\r\n    if (!instance) {\r\n      instance = new PreviewConstructor()\r\n    }\r\n    return instance\r\n  }\r\n\r\n  vue.prototype.$imagePreview = (opts = {}) => {\r\n    // eslint-disable-line\r\n    const elem = document.createElement('div')\r\n    if (!instance) {\r\n      let myInstance = getInstance()\r\n      vue.prototype.$previewInstance = myInstance // eslint-disable-line\r\n      myInstance.$mount(elem)\r\n      myInstance.data = opts.images || []\r\n      myInstance.imageIndex = opts.index || 0\r\n      myInstance.options = opts.defaultOpt || {}\r\n      document.body.appendChild(myInstance.$el)\r\n      myInstance.$on('close', () => {\r\n        myInstance.close()\r\n        document.body.removeChild(myInstance.$el)\r\n        myInstance.$destroy()\r\n        myInstance = null\r\n        instance = null\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nVue.use(previewImage)\r\n\r\nexport default previewImage\r\n"]}]}