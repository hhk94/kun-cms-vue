{"remainingRequest":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code_by_hk\\kun-cms-vue\\src\\pages\\Article\\ArticleList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code_by_hk\\kun-cms-vue\\src\\pages\\Article\\ArticleList.vue","mtime":1587548956124},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXJ0aWNsZSBmcm9tICdAL2t1bi9hcGkvYXJ0aWNsZScKZXhwb3J0IGRlZmF1bHQgewoJbmFtZTogJ0FydGljbGVMaXN0JywKCWRhdGEoKSB7DQoJcmV0dXJuIHsNCglhcnRpY2xlX2xpc3Q6W10sDQoJdG90YWw6MTAsLy/mgLvmlbANCgljdXJyZW50X3BhZ2U6MSwvL+W9k+WJjemhtQ0KCXBlcl9wYWdlOjMvL+S4gOmhteaYvuekuuaVsA0KCX0NCgl9LA0KCW1vdW50ZWQoKSB7DQoJCXRoaXMuYXJ0aWNsZV9saXN0X2dldCgpDQoJfSwNCgltZXRob2RzOnsNCgkJYXN5bmMgYXJ0aWNsZV9saXN0X2dldCgpey8v6I635Y+W5paH56ug5YiX6KGoDQoJCQlsZXQgZGF0YSA9IHsNCgkJCQlzaXplOnRoaXMucGVyX3BhZ2UsDQoJCQkJcGFnZTp0aGlzLmN1cnJlbnRfcGFnZQ0KCQkJfQ0KCQkJbGV0IHJlc3VsdA0KCQkJdHJ5IHsNCgkJCQl0aGlzLmxvYWRpbmcgPSB0cnVlDQoJCQkJcmVzdWx0ID0gYXdhaXQgQXJ0aWNsZS5hcnRpY2xlX2xpc3RfZ2V0KGRhdGEpDQoJCQl9IGNhdGNoIChlKSB7DQoJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2UNCgkJCQljb25zb2xlLmxvZyhlKQ0KCQkJfQ0KCQkJaWYocmVzdWx0LmRhdGEuc3RhdGU9PXdpbmRvdy5nLlNVQ0NFU1NfU1RBVEUpew0KCQkJCXRoaXMubG9hZGluZyA9IGZhbHNlDQoJCQkJdGhpcy5hcnRpY2xlX2xpc3QgPSByZXN1bHQuZGF0YS5kYXRhLmRhdGENCgkJCQl0aGlzLmN1cnJlbnRfcGFnZSA9IHJlc3VsdC5kYXRhLmN1cnJlbnRfcGFnZQ0KCQkJCXRoaXMudG90YWwgPSByZXN1bHQuZGF0YS50b3RhbA0KCQkJCXRoaXMucGVyX3BhZ2UgPXBhcnNlSW50KHJlc3VsdC5kYXRhLmRhdGEucGVyX3BhZ2UpOyANCgkJCQljb25zb2xlLmxvZyhyZXN1bHQpDQoJCQl9DQoJCX0sDQoJCWhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKXsvL+mhteeggeaUueWPmA0KCQkJY29uc29sZS5sb2coYOW9k+WJjemhtTogJHt2YWx9YCk7DQoJCQl0aGlzLmN1cnJlbnRfcGFnZSA9IHZhbA0KCQkJdGhpcy5hcnRpY2xlX2xpc3RfZ2V0KCkNCgkJfSwNCgkJaGFuZGxlRWRpdChyb3cpey8v5paH56ug5L+u5pS5DQoJCQljb25zb2xlLmxvZyhyb3cpDQoJCQljb25zdCBpZCA9IHJvdy5pZA0KCQkJdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2hvbWUvYXJ0aWNsZS1lZGl0JywgcXVlcnk6IHsgaWQgfX0pDQoJCX0sDQoJCWhhbmRsZURlbGV0ZShpbmRleCxyb3cpey8v5paH56ug5Yig6ZmkDQoJCQl0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xmlofnq6AsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCgkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCgkJCQl0eXBlOiAnd2FybmluZycNCgkJCQl9KS50aGVuKCgpID0+IHsNCgkJCQkJdGhpcy5kZWxldGVfYXJ0aWNsZShpbmRleCxyb3cpDQoJCQkJCQ0KCQkJCX0pLmNhdGNoKCgpID0+IHsNCgkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQl0eXBlOiAnaW5mbycsDQoJCQkJCQltZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJw0KCQkJCQl9KTsgICAgICAgICAgDQoJCQkJfSk7DQoJCX0sDQoJCWFzeW5jIGRlbGV0ZV9hcnRpY2xlKGluZGV4LHJvdyl7DQoJCQlsZXQgcGFyYW1zID0gew0KCQkJCWlkOnJvdy5pZA0KCQkJfQ0KCQkJbGV0IHJlc3VsdA0KCQkJdHJ5IHsNCgkJCQlyZXN1bHQgPSBhd2FpdCBBcnRpY2xlLmFydGljbGVfZGVsZXRlKHBhcmFtcykNCgkJCX0gY2F0Y2ggKGUpIHsNCgkJCQljb25zb2xlLmxvZyhlKQ0KCQkJfQ0KCQkJaWYocmVzdWx0LmRhdGEuc3RhdGUgPT0gd2luZG93LmcuU1VDQ0VTU19TVEFURSl7DQoJCQkJdGhpcy5hcnRpY2xlX2xpc3RfZ2V0KCkNCgkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJdHlwZTogJ3N1Y2Nlc3MnLA0KCQkJCQltZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScNCgkJCQl9KTsNCgkJCX0NCgkJfQ0KCX0KfQo="},{"version":3,"sources":["ArticleList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleList.vue","sourceRoot":"src/pages/Article","sourcesContent":["<template>\n\t<div class=\"article-list\">\r\n\t\t<el-breadcrumb separator=\"/\" class=\"bc\">\r\n\t\t\t<el-breadcrumb-item>文章相关</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>文章列表</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t<div class=\"table\">\r\n\t\t\t<el-table\r\n\t\t\t:data=\"article_list\"\r\n\t\t\tstyle=\"width: 100%\"\r\n\t\t\theight=\"600\">\r\n\t\t\t<el-table-column\r\n\t\t\tfixed\r\n\t\t\tprop=\"id\"\r\n\t\t\tlabel=\"id\"\r\n\t\t\twidth=\"50\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column\r\n\t\t\tprop=\"article_title\"\r\n\t\t\tlabel=\"标题\"\r\n\t\t\twidth=\"200\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column\r\n\t\t\tprop=\"belong_article_type.typename\"\r\n\t\t\tlabel=\"文章类别\"\r\n\t\t\twidth=\"120\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tag\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tdisable-transitions>{{scope.row.belong_article_type.typename}}</el-tag>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column\r\n\t\t\tprop=\"has_comments_count\"\r\n\t\t\tlabel=\"评论数\"\r\n\t\t\twidth=\"100\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column\r\n\t\t\tprop=\"belong_user.nick_name\"\r\n\t\t\tlabel=\"作者\"\r\n\t\t\t>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column\r\n\t\t\tfixed=\"right\"\r\n\t\t\tlabel=\"操作\"\r\n\t\t\twidth=\"150\">\r\n\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t<el-button\r\n\t\t\t\tsize=\"mini\"\r\n\t\t\t\t@click=\"handleEdit(scope.row)\">编辑</el-button>\r\n\t\t\t\t<el-button\r\n\t\t\t\tsize=\"mini\"\r\n\t\t\t\ttype=\"danger\"\r\n\t\t\t\t@click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<el-pagination\r\n\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\tclass=\"pag\"\r\n\t\t\tbackground\r\n\t\t\tlayout=\"prev, pager, next\"\r\n\t\t\t:current-page=\"this.current_page\"\r\n\t\t\t:page-size=\"this.per_page\"\r\n\t\t\t:total=\"this.total\">\r\n\t\t\t</el-pagination>\r\n\t\t</div>\n\t\t\r\n\t</div>\t\n</template>\n\n<script>\r\nimport Article from '@/kun/api/article'\nexport default {\n\tname: 'ArticleList',\n\tdata() {\r\n\treturn {\r\n\tarticle_list:[],\r\n\ttotal:10,//总数\r\n\tcurrent_page:1,//当前页\r\n\tper_page:3//一页显示数\r\n\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.article_list_get()\r\n\t},\r\n\tmethods:{\r\n\t\tasync article_list_get(){//获取文章列表\r\n\t\t\tlet data = {\r\n\t\t\t\tsize:this.per_page,\r\n\t\t\t\tpage:this.current_page\r\n\t\t\t}\r\n\t\t\tlet result\r\n\t\t\ttry {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tresult = await Article.article_list_get(data)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\tif(result.data.state==window.g.SUCCESS_STATE){\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tthis.article_list = result.data.data.data\r\n\t\t\t\tthis.current_page = result.data.current_page\r\n\t\t\t\tthis.total = result.data.total\r\n\t\t\t\tthis.per_page =parseInt(result.data.data.per_page); \r\n\t\t\t\tconsole.log(result)\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleCurrentChange(val){//页码改变\r\n\t\t\tconsole.log(`当前页: ${val}`);\r\n\t\t\tthis.current_page = val\r\n\t\t\tthis.article_list_get()\r\n\t\t},\r\n\t\thandleEdit(row){//文章修改\r\n\t\t\tconsole.log(row)\r\n\t\t\tconst id = row.id\r\n\t\t\tthis.$router.push({ path: '/home/article-edit', query: { id }})\r\n\t\t},\r\n\t\thandleDelete(index,row){//文章删除\r\n\t\t\tthis.$confirm('此操作将永久删除该文章, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tthis.delete_article(index,row)\r\n\t\t\t\t\t\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '已取消删除'\r\n\t\t\t\t\t});          \r\n\t\t\t\t});\r\n\t\t},\r\n\t\tasync delete_article(index,row){\r\n\t\t\tlet params = {\r\n\t\t\t\tid:row.id\r\n\t\t\t}\r\n\t\t\tlet result\r\n\t\t\ttry {\r\n\t\t\t\tresult = await Article.article_delete(params)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\tif(result.data.state == window.g.SUCCESS_STATE){\r\n\t\t\t\tthis.article_list_get()\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\tmessage: '删除成功!'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\r\n.bc{\r\n\t\r\n\tmargin: 20px;\r\n\twidth: calc(100% - 40px);\r\n\tmargin-bottom: 0;\r\n}\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\r\n.table{\r\n\tmargin: 20px;\r\n\twidth: calc(100% - 40px)!important;\r\n\t\r\n}\r\n::v-deep .pag{\r\n\tmargin-top: 40px;\r\n}\n</style>\n"]}]}