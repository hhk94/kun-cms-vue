{"remainingRequest":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code_by_hk\\kun-cms-vue\\src\\pages\\Article\\ArticleEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code_by_hk\\kun-cms-vue\\src\\pages\\Article\\ArticleEdit.vue","mtime":1587548990915},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code_by_hk\\kun-cms-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVXRpbHMgZnJvbSAnQC9rdW4vdXRpbHMvdXRpbCcNCmltcG9ydCBBcnRpY2xlIGZyb20gJ0Ava3VuL2FwaS9hcnRpY2xlJw0KLy8g5a+85YWl57uE5Lu2IOWPiiDnu4Tku7bmoLflvI8NCmltcG9ydCB7IG1hdm9uRWRpdG9yIH0gZnJvbSAnbWF2b24tZWRpdG9yJw0KaW1wb3J0ICdtYXZvbi1lZGl0b3IvZGlzdC9jc3MvaW5kZXguY3NzJwpleHBvcnQgZGVmYXVsdCB7CgluYW1lOiAnQXJ0aWNsZUVkaXQnLA0KCS8v5rOo5YaMDQoJY29tcG9uZW50czp7DQoJCW1hdm9uRWRpdG9yDQoJfSwNCglkYXRhKCkgew0KCQlyZXR1cm4gew0KCQkJY29udGVudDonJywgLy8g6L6T5YWl55qEbWFya2Rvd24NCgkJCWh0bWw6JycsICAgIC8vIOWPiuaXtui9rOeahGh0bWwNCgkJCXRpdGxlOicxJywNCgkJCWR5bmFtaWNUYWdzOiBbe2lkOjEsJ3R5cGVuYW1lJzon5qCH562+5LiAJ30se2lkOjIsJ3R5cGVuYW1lJzon5qCH562+Mid9LHtpZDozLCd0eXBlbmFtZSc6J+agh+etvjMnfV0sDQoJCQlpbnB1dFZpc2libGU6IGZhbHNlLA0KCQkJbmV3VGFnOiAnJywvL+aWsOWinueahOagh+etvg0KCQkJbG9hZGluZzpmYWxzZSwvL+WPkei1t+ivt+axguaXtueahOmBrue9qQ0KCQkJY2hlY2tlZF9ncm91cDp7fSwvL+mAieS4reeahOexu+WIq+agh+etvg0KCQkJdXNlcl9pZDonJywvL+aWh+eroOa3u+WKoOS6uueahGlkDQoJCQlpbWdfcXVldWU6W10sLy/kuIrkvKDnmoTlm77niYfpmJ/liJfvvIznlKjkuo7lm77niYfliKDpmaQNCgkJCWFydGljbGVfaWQ6bnVsbC8v5paH56ugaWQg6Zmk56ys5LiA5qyh5L+d5a2YIOWQjue7reS/neWtmOmDveaYr+S/ruaUuQ0KCQl9DQoJfSwNCgltZXRob2RzOiB7DQoJCWNoZWNrX3R5cGUodGFnKXsNCgkJCXRoaXMuY2hlY2tlZF9ncm91cCA9IHRhZw0KCQl9LA0KCQloYW5kbGVDbG9zZSh0YWcpIHsvL+eCueWHu+agh+etvuWIoOmZpOaMiemSrg0KCQkJY29uc29sZS5sb2codGFnKQ0KCQkJdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5YiG57G7LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsNCgkJCQljb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQoJCQkJY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQoJCQkJdHlwZTogJ3dhcm5pbmcnDQoJCQkJfSkudGhlbigoKSA9PiB7DQoJCQkJCXRoaXMuZGVsZXRlX3RhZyh0YWcpDQoJCQkJCQ0KCQkJCX0pLmNhdGNoKCgpID0+IHsNCgkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQl0eXBlOiAnaW5mbycsDQoJCQkJCQltZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJw0KCQkJCQl9KTsgICAgICAgICAgDQoJCQkJfSk7DQoJCX0sDQoJCWFzeW5jIGRlbGV0ZV90YWcodGFnKXsvL+agh+etvuWIoOmZpOivt+axgg0KCQkJbGV0IGRhdGEgPSB7DQoJCQkJaWQ6dGFnLmlkDQoJCQl9DQoJCQlsZXQgcmVzdWx0DQoJCQl0cnkgew0KCQkJCXJlc3VsdCA9IGF3YWl0IEFydGljbGUuYXJ0aWNsZV90eXBlX2RlbGV0ZShkYXRhKQ0KCQkJfSBjYXRjaCAoZSkgew0KCQkJCWNvbnNvbGUubG9nKGUpDQoJCQl9DQoJCQlpZihyZXN1bHQuZGF0YS5zdGF0ZSA9PSB3aW5kb3cuZy5TVUNDRVNTX1NUQVRFKXsNCgkJCQl0aGlzLmR5bmFtaWNUYWdzLnNwbGljZSh0aGlzLmR5bmFtaWNUYWdzLmluZGV4T2YodGFnKSwgMSk7DQoJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCXR5cGU6ICdzdWNjZXNzJywNCgkJCQkJbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnDQoJCQkJfSk7DQoJCQl9DQoJCX0sDQoJCQ0KCQlhc3luYyBpbml0KCl7Ly/liJ3lp4vljJYNCgkJCXRoaXMudXNlcl9pZCA9IHRoaXMuJHN0b3JlLmdldHRlcnMudG9rZW4uYXBwLmlkDQoJCQl0aGlzLmFydGljbGVfaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZA0KCQkJYXdhaXQgdGhpcy5nZXRfYWxsX3RhZ3MoKQ0KCQkJYXdhaXQgdGhpcy5nZXRfYXJ0aWNsZV9kZXRhaWwoKQ0KCQl9LA0KCQkvL+WIpOaWreWvueixoeaYr+WQpuebuOWQjA0KCQlpc09iakVxdWFsKG8xLG8yKXsNCgkJCXJldHVybiBVdGlscy5pc09iakVxdWFsKG8xLG8yKQ0KCQl9LA0KCQlhc3luYyBnZXRfYXJ0aWNsZV9kZXRhaWwoKXsNCgkJCWxldCBwYXJhbXMgPSB7DQoJCQkJaWQ6dGhpcy5hcnRpY2xlX2lkIA0KCQkJfQ0KCQkJbGV0IHJlc3VsdA0KCQkJdHJ5IHsNCgkJCQlyZXN1bHQgPSBhd2FpdCBBcnRpY2xlLmFydGljbGVfZ2V0KHBhcmFtcykNCgkJCX0gY2F0Y2ggKGUpIHsNCgkJCQljb25zb2xlLmxvZyhlKQ0KCQkJfQ0KCQkJaWYocmVzdWx0LmRhdGEuc3RhdGU9PXdpbmRvdy5nLlNVQ0NFU1NfU1RBVEUpew0KCQkJCWNvbnNvbGUubG9nKHJlc3VsdCkNCgkJCQl0aGlzLmNvbnRlbnQgPSByZXN1bHQuZGF0YS5kYXRhLmFydGljbGVfY29udGVudA0KCQkJCXRoaXMudXNlcl9pZCA9IHJlc3VsdC5kYXRhLmRhdGEuYXJ0aWNsZV9pbnB1dF9pZA0KCQkJCXRoaXMudGl0bGUgPSByZXN1bHQuZGF0YS5kYXRhLmFydGljbGVfdGl0bGUNCgkJCQl0aGlzLmNoZWNrZWRfZ3JvdXAgPSByZXN1bHQuZGF0YS5kYXRhLmJlbG9uZ19hcnRpY2xlX3R5cGUNCgkJCX0NCgkJfSwNCgkJYXN5bmMgZ2V0X2FsbF90YWdzKCl7Ly/ojrflj5bmiYDmnInmoIfnrb7ljaENCgkJCWxldCByZXN1bHQNCgkJCXRyeSB7DQoJCQkJcmVzdWx0ID0gYXdhaXQgQXJ0aWNsZS5hcnRpY2xlX3R5cGVfbGlzdF9nZXQoKQ0KCQkJfSBjYXRjaCAoZSkgew0KCQkJCWNvbnNvbGUubG9nKGUpDQoJCQl9DQoJCQlpZihyZXN1bHQuZGF0YS5zdGF0ZT09d2luZG93LmcuU1VDQ0VTU19TVEFURSl7DQoJCQkJdGhpcy5keW5hbWljVGFncyA9IHJlc3VsdC5kYXRhLmRhdGENCgkJCX0NCgkJfSwNCgkJc2hvd0lucHV0KCkgey8v5pi+56S65paw5aKe5qCH562+55qE6L6T5YWl5qGGDQoJCQl0aGlzLmlucHV0VmlzaWJsZSA9IHRydWU7DQoJCQl0aGlzLiRuZXh0VGljaygoKT0+IHsNCgkJCQl0aGlzLiRyZWZzLnNhdmVUYWdJbnB1dC4kcmVmcy5pbnB1dC5mb2N1cygpOw0KCQkJfSk7DQoJCX0sDQoJCQ0KCQlhc3luYyBoYW5kbGVJbnB1dENvbmZpcm0oKSB7Ly/ngrnlh7vmlrDlop7moIfnrb4NCgkJCWxldCBuZXdUYWcgPSB0aGlzLm5ld1RhZzsNCgkJCWlmIChuZXdUYWcpIHsNCgkJCQlsZXQgZGF0YSA9IHsNCgkJCQkJJ3R5cGVuYW1lJzpuZXdUYWcNCgkJCQl9DQoJCQkJbGV0IHJlc3VsdA0KCQkJCXRyeSB7DQoJCQkJCXRoaXMubG9hZGluZyA9IHRydWUNCgkJCQkJcmVzdWx0ID0gYXdhaXQgQXJ0aWNsZS5hcnRpY2xlX3R5cGVfYWRkKGRhdGEpDQoJCQkJfSBjYXRjaCAoZSkgew0KCQkJCQl0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KCQkJCQljb25zb2xlLmxvZyhlKQ0KCQkJCX0NCgkJCQlpZihyZXN1bHQuZGF0YS5zdGF0ZT09d2luZG93LmcuU1VDQ0VTU19TVEFURSl7DQoJCQkJCXRoaXMubG9hZGluZyA9IGZhbHNlDQoJCQkJCWxldCBhZGRfdGFnID0gcmVzdWx0LmRhdGEuZGF0YQ0KCQkJCQl0aGlzLmR5bmFtaWNUYWdzLnB1c2goYWRkX3RhZyk7DQoJCQkJfQ0KCQkJfQ0KCQkJdGhpcy5pbnB1dFZpc2libGUgPSBmYWxzZTsNCgkJCXRoaXMubmV3VGFnID0gJyc7DQoJCX0sDQoJCS8vIOaJgOacieaTjeS9nOmDveS8muiiq+ino+aekOmHjeaWsOa4suafkyAtIOe8lui+keWMuuWPkeeUn+aUueWPmA0KCQljaGFuZ2UodmFsdWUsIHJlbmRlcil7DQoJCQkvLyByZW5kZXIg5Li6IG1hcmtkb3duIOino+aekOWQjueahOe7k+aenFtodG1sXQ0KCQkJY29uc29sZS5sb2cocmVuZGVyKQ0KCQkJdGhpcy5odG1sID0gcmVuZGVyOw0KCQl9LA0KCQkvLyDlsIblm77niYfkuIrkvKDliLDmnI3liqHlmajvvIzov5Tlm57lnLDlnYDmm7/mjaLliLBtZOS4rQ0KCQlhc3luYyAkaW1nQWRkKHBvcywgJGZpbGUpew0KCQkJY29uc29sZS5sb2cocG9zKQ0KCQkJY29uc29sZS5sb2coJGZpbGUpDQoJCQlsZXQgZGF0YSA9IHsNCgkJCQknZmlsZVtdJzokZmlsZQ0KCQkJfQ0KCQkJbGV0IHJlc3VsdA0KCQkJdHJ5IHsNCgkJCQl0aGlzLmxvYWRpbmcgPSB0cnVlDQoJCQkJcmVzdWx0ID0gYXdhaXQgQXJ0aWNsZS5hcnRpY2xlX2FkZF9pbWcoZGF0YSkNCgkJCX0gY2F0Y2ggKGUpIHsNCgkJCQl0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KCQkJCWNvbnNvbGUubG9nKGUpDQoJCQl9DQoJCQlpZihyZXN1bHQuZGF0YS5zdGF0ZT09d2luZG93LmcuU1VDQ0VTU19TVEFURSl7DQoJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2UNCgkJCQljb25zb2xlLmxvZyhyZXN1bHQuZGF0YS5kYXRhKQ0KCQkJCXRoaXMuJHJlZnMubWQuJGltZzJVcmwocG9zLCByZXN1bHQuZGF0YS5kYXRhKTsNCgkJCQlsZXQgaXRlbSA9IHsNCgkJCQkJaWQ6cmVzdWx0LmRhdGEuaWQsDQoJCQkJCWRhdGE6cmVzdWx0LmRhdGEuZGF0YQ0KCQkJCX0NCgkJCQl0aGlzLmltZ19xdWV1ZS5wdXNoKGl0ZW0pDQoJCQkJY29uc29sZS5sb2codGhpcy5pbWdfcXVldWUpDQoJCQl9DQoJCX0sDQoJCSRpbWdEZWwocG9zKXsNCgkJCS8vIGNvbnNvbGUubG9nKHBvcykNCgkJCWxldCBpZHMgPSB0aGlzLmltZ19xdWV1ZS5maWx0ZXIoaXRlbT0+ew0KCQkJCXJldHVybiBpdGVtLmRhdGEgPT0gcG9zWzBdDQoJCQl9KQ0KCQkJY29uc29sZS5sb2coaWRzKQ0KCQl9LA0KCQkvLyDmj5DkuqQNCgkJc3VibWl0KCl7DQoJCQljb25zb2xlLmxvZyh0aGlzLmNvbnRlbnQpOw0KCQkJY29uc29sZS5sb2codGhpcy5odG1sKTsNCgkJfSwNCgkJLy9lZGl0IOiHquW4puS/neWtmOS6i+S7tiAtIOWPr+eUqCBjdHJsICsgc+inpuWPkQ0KCQlhc3luYyAkc2F2ZSgpew0KCQkJY29uc29sZS5sb2coJ3NhdmUnKTsNCgkJCWlmKCF0aGlzLnRpdGxlKSB7DQoJCQkJdGhpcy4kbm90aWZ5LmVycm9yKHsNCgkJCQkJdGl0bGU6ICfplJnor68nLA0KCQkJCQltZXNzYWdlOiAn6K+35aGr5YaZ5paH56ug5qCH6aKYJw0KCQkJCX0pOw0KCQkJCXJldHVybg0KCQkJfQ0KCQkJaWYoIXRoaXMuY2hlY2tlZF9ncm91cC5pZCkgew0KCQkJCXRoaXMuJG5vdGlmeS5lcnJvcih7DQoJCQkJCXRpdGxlOiAn6ZSZ6K+vJywNCgkJCQkJbWVzc2FnZTogJ+ivt+mAieaLqeaWh+eroOWIhuexuycNCgkJCQl9KTsNCgkJCQlyZXR1cm4NCgkJCX0NCgkJCWlmKHRoaXMuY29udGVudD09JycpIHJldHVybg0KCQkJbGV0IGRhdGEgPSB7DQoJCQkJJ2FydGljbGVfaWQnOnRoaXMuYXJ0aWNsZV9pZCwNCgkJCQknYXJ0aWNsZV90aXRsZSc6dGhpcy50aXRsZSwNCgkJCQknYXJ0aWNsZV90eXBlX2lkJzp0aGlzLmNoZWNrZWRfZ3JvdXAuaWQsDQoJCQkJJ2FydGljbGVfY29udGVudCc6dGhpcy5jb250ZW50LA0KCQkJCSdhcnRpY2xlX2h0bWwnOnRoaXMuaHRtbCwNCgkJCQknYXJ0aWNsZV9pbnB1dF9pZCc6dGhpcy51c2VyX2lkDQoJCQl9DQoJCQlsZXQgcmVzdWx0DQoJCQl0cnkgew0KCQkJCXRoaXMubG9hZGluZyA9IHRydWUNCgkJCQlyZXN1bHQgPSBhd2FpdCBBcnRpY2xlLmFydGljbGVfYWRkKGRhdGEpDQoJCQl9IGNhdGNoIChlKSB7DQoJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2UNCgkJCQljb25zb2xlLmxvZyhlKQ0KCQkJfQ0KCQkJaWYocmVzdWx0LmRhdGEuc3RhdGU9PXdpbmRvdy5nLlNVQ0NFU1NfU1RBVEUpew0KCQkJCWNvbnNvbGUubG9nKHJlc3VsdCkNCgkJCQl0aGlzLmFydGljbGVfaWQgPSByZXN1bHQuZGF0YS5kYXRhLmlkDQoJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2UNCgkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJdHlwZTogJ3N1Y2Nlc3MnLA0KCQkJCQltZXNzYWdlOiAn5L+d5a2Y5oiQ5YqfIScNCgkJCQl9KTsNCgkJCX1lbHNlIGlmKHJlc3VsdC5kYXRhLnN0YXRlPT13aW5kb3cuZy5GQUlMX1NUQVRFKXsNCgkJCQl0aGlzLiRub3RpZnkuZXJyb3Ioew0KCQkJCQl0aXRsZTogJ+mUmeivrycsDQoJCQkJCW1lc3NhZ2U6ICfmnI3liqHlmajor7fmsYLmnKrpgJrov4cnDQoJCQkJfSk7DQoJCQl9DQoJCQkNCgkJfQ0KCX0sCgltb3VudGVkKCkgew0KCQljb25zb2xlLmxvZyh0aGlzLiRyb3V0ZS5xdWVyeS5pZCkNCgkJdGhpcy5pbml0KCkNCgl9Cn0K"},{"version":3,"sources":["ArticleEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleEdit.vue","sourceRoot":"src/pages/Article","sourcesContent":["<template>\n\t<div class=\"article\" v-loading=\"loading\">\r\n\t\t<el-breadcrumb separator=\"/\" class=\"bc\">\r\n\t\t\t<el-breadcrumb-item>文章相关</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>文章修改</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t<el-input placeholder=\"请输入内容\" v-model=\"title\" class=\"title\">\r\n\t\t\t<template slot=\"prepend\">标题</template>\r\n\t\t</el-input>\r\n\t\t<div class=\"tag-body\">\r\n\t\t\t<span class=\"tag-group__title\">请选择分类</span>\r\n\t\t\t<el-tag\r\n\t\t\tclass=\"tag-item\"\r\n\t\t\t:key=\"tag.id\"\r\n\t\t\tv-for=\"tag in dynamicTags\"\r\n\t\t\tclosable\r\n\t\t\t:disable-transitions=\"false\"\r\n\t\t\t:effect=\"isObjEqual(tag,checked_group)?'dark':'light'\"\r\n\t\t\t@click=\"check_type(tag)\"\r\n\t\t\t@close=\"handleClose(tag)\">\r\n\t\t\t{{tag.typename}}\r\n\t\t\t</el-tag>\r\n\t\t\t<el-input\r\n\t\t\tclass=\"input-new-tag\"\r\n\t\t\tv-if=\"inputVisible\"\r\n\t\t\tv-model=\"newTag\"\r\n\t\t\tref=\"saveTagInput\"\r\n\t\t\tsize=\"small\"\r\n\t\t\t@keyup.enter.native=\"handleInputConfirm\"\r\n\t\t\t@blur=\"handleInputConfirm\"\r\n\t\t\t>\r\n\t\t\t</el-input>\r\n\t\t\t<el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ New Tag</el-button>\r\n\t\t</div>\r\n\t\t<mavon-editor \r\n\t\tv-model=\"content\" \r\n\t\tref=\"md\" \r\n\t\t@change=\"change\" \r\n\t\tclass=\"edit\"\r\n\t\t@imgAdd=\"$imgAdd\"\r\n\t\t@save=\"$save\"\r\n\t\t@imgDel=\"$imgDel\"\r\n\t\t/>\r\n\t</div>\n</template>\n\n<script>\r\nimport Utils from '@/kun/utils/util'\r\nimport Article from '@/kun/api/article'\r\n// 导入组件 及 组件样式\r\nimport { mavonEditor } from 'mavon-editor'\r\nimport 'mavon-editor/dist/css/index.css'\nexport default {\n\tname: 'ArticleEdit',\r\n\t//注册\r\n\tcomponents:{\r\n\t\tmavonEditor\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcontent:'', // 输入的markdown\r\n\t\t\thtml:'',    // 及时转的html\r\n\t\t\ttitle:'1',\r\n\t\t\tdynamicTags: [{id:1,'typename':'标签一'},{id:2,'typename':'标签2'},{id:3,'typename':'标签3'}],\r\n\t\t\tinputVisible: false,\r\n\t\t\tnewTag: '',//新增的标签\r\n\t\t\tloading:false,//发起请求时的遮罩\r\n\t\t\tchecked_group:{},//选中的类别标签\r\n\t\t\tuser_id:'',//文章添加人的id\r\n\t\t\timg_queue:[],//上传的图片队列，用于图片删除\r\n\t\t\tarticle_id:null//文章id 除第一次保存 后续保存都是修改\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tcheck_type(tag){\r\n\t\t\tthis.checked_group = tag\r\n\t\t},\r\n\t\thandleClose(tag) {//点击标签删除按钮\r\n\t\t\tconsole.log(tag)\r\n\t\t\tthis.$confirm('此操作将永久删除该分类, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tthis.delete_tag(tag)\r\n\t\t\t\t\t\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '已取消删除'\r\n\t\t\t\t\t});          \r\n\t\t\t\t});\r\n\t\t},\r\n\t\tasync delete_tag(tag){//标签删除请求\r\n\t\t\tlet data = {\r\n\t\t\t\tid:tag.id\r\n\t\t\t}\r\n\t\t\tlet result\r\n\t\t\ttry {\r\n\t\t\t\tresult = await Article.article_type_delete(data)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\tif(result.data.state == window.g.SUCCESS_STATE){\r\n\t\t\t\tthis.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\tmessage: '删除成功!'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync init(){//初始化\r\n\t\t\tthis.user_id = this.$store.getters.token.app.id\r\n\t\t\tthis.article_id = this.$route.query.id\r\n\t\t\tawait this.get_all_tags()\r\n\t\t\tawait this.get_article_detail()\r\n\t\t},\r\n\t\t//判断对象是否相同\r\n\t\tisObjEqual(o1,o2){\r\n\t\t\treturn Utils.isObjEqual(o1,o2)\r\n\t\t},\r\n\t\tasync get_article_detail(){\r\n\t\t\tlet params = {\r\n\t\t\t\tid:this.article_id \r\n\t\t\t}\r\n\t\t\tlet result\r\n\t\t\ttry {\r\n\t\t\t\tresult = await Article.article_get(params)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\tif(result.data.state==window.g.SUCCESS_STATE){\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t\tthis.content = result.data.data.article_content\r\n\t\t\t\tthis.user_id = result.data.data.article_input_id\r\n\t\t\t\tthis.title = result.data.data.article_title\r\n\t\t\t\tthis.checked_group = result.data.data.belong_article_type\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync get_all_tags(){//获取所有标签卡\r\n\t\t\tlet result\r\n\t\t\ttry {\r\n\t\t\t\tresult = await Article.article_type_list_get()\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\tif(result.data.state==window.g.SUCCESS_STATE){\r\n\t\t\t\tthis.dynamicTags = result.data.data\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowInput() {//显示新增标签的输入框\r\n\t\t\tthis.inputVisible = true;\r\n\t\t\tthis.$nextTick(()=> {\r\n\t\t\t\tthis.$refs.saveTagInput.$refs.input.focus();\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\tasync handleInputConfirm() {//点击新增标签\r\n\t\t\tlet newTag = this.newTag;\r\n\t\t\tif (newTag) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\t'typename':newTag\r\n\t\t\t\t}\r\n\t\t\t\tlet result\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\tresult = await Article.article_type_add(data)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t}\r\n\t\t\t\tif(result.data.state==window.g.SUCCESS_STATE){\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tlet add_tag = result.data.data\r\n\t\t\t\t\tthis.dynamicTags.push(add_tag);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.inputVisible = false;\r\n\t\t\tthis.newTag = '';\r\n\t\t},\r\n\t\t// 所有操作都会被解析重新渲染 - 编辑区发生改变\r\n\t\tchange(value, render){\r\n\t\t\t// render 为 markdown 解析后的结果[html]\r\n\t\t\tconsole.log(render)\r\n\t\t\tthis.html = render;\r\n\t\t},\r\n\t\t// 将图片上传到服务器，返回地址替换到md中\r\n\t\tasync $imgAdd(pos, $file){\r\n\t\t\tconsole.log(pos)\r\n\t\t\tconsole.log($file)\r\n\t\t\tlet data = {\r\n\t\t\t\t'file[]':$file\r\n\t\t\t}\r\n\t\t\tlet result\r\n\t\t\ttry {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tresult = await Article.article_add_img(data)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\tif(result.data.state==window.g.SUCCESS_STATE){\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tconsole.log(result.data.data)\r\n\t\t\t\tthis.$refs.md.$img2Url(pos, result.data.data);\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\tid:result.data.id,\r\n\t\t\t\t\tdata:result.data.data\r\n\t\t\t\t}\r\n\t\t\t\tthis.img_queue.push(item)\r\n\t\t\t\tconsole.log(this.img_queue)\r\n\t\t\t}\r\n\t\t},\r\n\t\t$imgDel(pos){\r\n\t\t\t// console.log(pos)\r\n\t\t\tlet ids = this.img_queue.filter(item=>{\r\n\t\t\t\treturn item.data == pos[0]\r\n\t\t\t})\r\n\t\t\tconsole.log(ids)\r\n\t\t},\r\n\t\t// 提交\r\n\t\tsubmit(){\r\n\t\t\tconsole.log(this.content);\r\n\t\t\tconsole.log(this.html);\r\n\t\t},\r\n\t\t//edit 自带保存事件 - 可用 ctrl + s触发\r\n\t\tasync $save(){\r\n\t\t\tconsole.log('save');\r\n\t\t\tif(!this.title) {\r\n\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\ttitle: '错误',\r\n\t\t\t\t\tmessage: '请填写文章标题'\r\n\t\t\t\t});\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!this.checked_group.id) {\r\n\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\ttitle: '错误',\r\n\t\t\t\t\tmessage: '请选择文章分类'\r\n\t\t\t\t});\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(this.content=='') return\r\n\t\t\tlet data = {\r\n\t\t\t\t'article_id':this.article_id,\r\n\t\t\t\t'article_title':this.title,\r\n\t\t\t\t'article_type_id':this.checked_group.id,\r\n\t\t\t\t'article_content':this.content,\r\n\t\t\t\t'article_html':this.html,\r\n\t\t\t\t'article_input_id':this.user_id\r\n\t\t\t}\r\n\t\t\tlet result\r\n\t\t\ttry {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tresult = await Article.article_add(data)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\tif(result.data.state==window.g.SUCCESS_STATE){\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t\tthis.article_id = result.data.data.id\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\tmessage: '保存成功!'\r\n\t\t\t\t});\r\n\t\t\t}else if(result.data.state==window.g.FAIL_STATE){\r\n\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\ttitle: '错误',\r\n\t\t\t\t\tmessage: '服务器请求未通过'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t},\n\tmounted() {\r\n\t\tconsole.log(this.$route.query.id)\r\n\t\tthis.init()\r\n\t}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.title{\r\n\tmargin: 20px;\r\n\twidth: calc(100% - 40px);\r\n}\r\n.bc{\r\n\t\r\n\tmargin: 20px;\r\n\twidth: calc(100% - 40px);\r\n\tmargin-bottom: 0;\r\n}\r\n.edit{\r\n\tmin-height: 600px;\r\n\twidth: calc(100% - 40px);\r\n\tmargin:0 20px;\r\n}\r\n.tag-body{\r\n\tdisplay: flex;\r\n\tmargin: 0 20px 20px 20px;\r\n\tflex-wrap: wrap;\r\n\t.tag-group__title{\r\n\t\tline-height: 52px;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #909399;\r\n\t}\r\n\t.tag-item{\r\n\t\tmargin:10px;\r\n\t\tcursor: pointer;\r\n\t\t@include _no-select;\r\n\t}\r\n.input-new-tag {\r\n\twidth: 150px;\r\n\tmargin: 10px;\r\n\tvertical-align: bottom;\r\n}\r\n.button-new-tag{\r\n\tmargin: 10px;\r\n}\r\n}\r\n.article{\r\n\t::v-deep .markdown-body img{\r\n\t\tmax-width: 100%;\r\n\t\tbox-sizing: content-box;\r\n\t\tbackground-color: transparent;\r\n\t\twidth: auto;\r\n\t\theight: auto;\r\n\t\tvertical-align: middle;\r\n\t\tborder: 0;\r\n\t\tmargin: 5px auto;\r\n\t\tpadding-bottom: 20px;\r\n\t\tborder-bottom: 1px solid #d9d9d9;\r\n\t}\r\n} \r\n// /deep/.markdown-body img{\r\n// \tmax-width: 50%;\r\n// }\n</style>\n"]}]}